generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model tbl_artikel {
  id_artikel        Int       @id
  judul             String    @db.VarChar(150)
  gambar            String?   @db.VarChar(100)
  deskripsi_singkat String?   @db.Text
  isi_lengkap       String?   @db.LongText
  tanggal_upload    DateTime  @db.Date
  id_user           Int?
  tbl_user          tbl_user? @relation(fields: [id_user], references: [id_user], onDelete: Restrict, onUpdate: Restrict, map: "fk_artikel_user")

  @@index([id_user], map: "fk_artikel_user")
}

model tbl_level {
  id_level Int        @id
  level    String?    @db.VarChar(25)
  tbl_user tbl_user[]
}

model tbl_olshop_link {
  id_link       Int      @id @default(autoincrement())
  id_produk     Int
  nama_platform String?  @db.VarChar(50)
  url           String   @db.Text
  tbl_umkm      tbl_umkm @relation(fields: [id_produk], references: [id_produk], onUpdate: Restrict, map: "fk_produk_olshop")

  @@index([id_produk], map: "fk_produk_olshop")
}

model tbl_subsektor {
  id_sub     Int        @id
  sub_sektor String?    @db.VarChar(25)
  tbl_umkm   tbl_umkm[]
}

model tbl_umkm {
  id_produk       Int               @id
  id_sub          Int
  nama_pelaku     String?           @db.VarChar(35)
  gambar          String            @db.VarChar(35)
  deskripsi       String            @db.VarChar(500)
  nama_usaha      String            @db.VarChar(50)
  harga           Float
  stok            Int
  nohp            String            @db.VarChar(12)
  tgl_upload      DateTime          @db.Date
  tbl_olshop_link tbl_olshop_link[]
  tbl_subsektor   tbl_subsektor     @relation(fields: [id_sub], references: [id_sub], onUpdate: Restrict, map: "fk_user_sub")

  @@index([id_sub], map: "fk_user_sub")
}

model tbl_user {
  id_user     Int           @id
  id_level    Int
  nama_user   String?       @db.VarChar(35)
  jk          tbl_user_jk
  nohp        String?       @db.VarChar(20)
  username    String        @db.VarChar(45)
  password    String        @db.VarChar(50)
  email       String?       @db.VarChar(100)
  tbl_artikel tbl_artikel[]
  tbl_level   tbl_level     @relation(fields: [id_level], references: [id_level], onUpdate: Restrict, map: "fk_user_level")

  @@index([id_level], map: "fk_user_level")
}

enum tbl_user_jk {
  Laki_laki @map("Laki-laki")
  Perempuan
}
